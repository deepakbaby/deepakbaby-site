<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DDP Introduction - Distributed Training</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: #0f0f0f;
            background-image: radial-gradient(circle at 20% 50%, rgba(74, 158, 255, 0.06) 0%, transparent 50%),
                            radial-gradient(circle at 80% 80%, rgba(74, 158, 255, 0.04) 0%, transparent 50%);
            color: #e8e8e8;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .content-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 60px 100px;
            position: relative;
            max-width: 1400px;
        }

        .page-title {
            font-size: 3.5rem;
            font-weight: 600;
            color: #f0f0f0;
            margin-bottom: 40px;
            text-align: center;
            letter-spacing: -0.02em;
            text-shadow: 0 0 20px rgba(74, 158, 255, 0.3);
            opacity: 0;
            transform: translateY(-30px);
            transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .page-title.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .content-area {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 40px;
            align-items: center;
        }

        .intro-text {
            font-size: 1.8rem;
            line-height: 1.7;
            color: #e8e8e8;
            text-align: center;
            max-width: 1000px;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .intro-text.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .highlight {
            color: #4a9eff;
            font-weight: 600;
        }

        .key-points {
            display: flex;
            gap: 40px;
            margin-top: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .key-point {
            background: rgba(45, 45, 45, 0.6);
            border: 2px solid rgba(74, 158, 255, 0.2);
            border-radius: 12px;
            padding: 30px 40px;
            max-width: 300px;
            backdrop-filter: blur(8px);
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .key-point.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .key-point:nth-child(1) {
            transition-delay: 0.2s;
        }

        .key-point:nth-child(2) {
            transition-delay: 0.4s;
        }

        .key-point:nth-child(3) {
            transition-delay: 0.6s;
        }

        .key-point-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #4a9eff;
            margin-bottom: 15px;
        }

        .key-point-text {
            font-size: 1.1rem;
            line-height: 1.6;
            color: #e8e8e8;
        }

        /* Animation controls - hidden but present for parent detection */
        .animation-controls {
            position: fixed;
            bottom: 70px;
            right: 30px;
            display: flex;
            gap: 15px;
            align-items: center;
            background: rgba(45, 45, 45, 0.95);
            padding: 10px 20px;
            border-radius: 30px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            z-index: 1003;
            backdrop-filter: blur(10px);
            visibility: hidden;
            pointer-events: none;
        }

        .anim-arrow {
            background: rgba(60, 60, 60, 0.9);
            border: 2px solid #555;
            color: #e0e0e0;
            font-size: 20px;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            user-select: none;
        }

        .anim-arrow:hover:not(:disabled) {
            background: rgba(74, 158, 255, 0.2);
            border-color: #4a9eff;
            transform: scale(1.1);
        }

        .anim-arrow:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .animation-step-indicator {
            color: #b0b0b0;
            font-size: 14px;
            margin: 0 10px;
            min-width: 60px;
            text-align: center;
        }

        @media (max-width: 768px) {
            .page-title {
                font-size: 2.5rem;
            }

            .intro-text {
                font-size: 1.4rem;
            }

            .key-points {
                flex-direction: column;
                align-items: center;
            }

            .key-point {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="content-container">
        <h1 class="page-title" id="pageTitle">Distributed Data Parallelism (DDP)</h1>
        
        <div class="content-area">
            <div class="intro-text" id="introText">
                <span class="highlight">Distributed Data Parallelism (DDP)</span> is a training strategy where the same model is replicated across multiple GPUs, each processing different data batches. After each forward and backward pass, gradients are synchronized across all GPUs to update the model weights consistently.
            </div>

            <div class="key-points">
                <div class="key-point" id="keyPoint1">
                    <div class="key-point-title">Same Model Everywhere</div>
                    <div class="key-point-text">Each GPU maintains an identical copy of the entire model, ensuring consistency across all devices.</div>
                </div>
                <div class="key-point" id="keyPoint2">
                    <div class="key-point-title">Different Data</div>
                    <div class="key-point-text">Training data is split into batches, with each GPU processing a unique subset of the data.</div>
                </div>
                <div class="key-point" id="keyPoint3">
                    <div class="key-point-title">Gradient Synchronization</div>
                    <div class="key-point-text">Gradients from all GPUs are gathered, averaged, and broadcast back to keep models in sync.</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Animation controls for parent frame -->
    <div class="animation-controls">
        <button class="anim-arrow" id="prevAnim" onclick="navigateAnimation(-1)">←</button>
        <div class="animation-step-indicator">
            <span id="currentStep">1</span> / <span id="totalSteps">4</span>
        </div>
        <button class="anim-arrow" id="nextAnim" onclick="navigateAnimation(1)">→</button>
    </div>

    <script>
        let currentStep = 0;
        const totalSteps = 4; // Title, intro text, then 3 key points

        // Make navigateAnimation available to parent
        window.navigateAnimation = function(direction) {
            const oldStep = currentStep;
            if (direction > 0 && currentStep < totalSteps - 1) {
                currentStep++;
            } else if (direction < 0 && currentStep > 0) {
                currentStep--;
            }
            // Only update if step actually changed
            if (oldStep !== currentStep) {
                updateDisplay();
            }
        };

        function updateDisplay() {
            // Step 0: Show title
            if (currentStep >= 0) {
                document.getElementById('pageTitle').classList.add('visible');
            } else {
                document.getElementById('pageTitle').classList.remove('visible');
            }

            // Step 1: Show intro text
            if (currentStep >= 1) {
                document.getElementById('introText').classList.add('visible');
            } else {
                document.getElementById('introText').classList.remove('visible');
            }

            // Step 2: Show first key point
            if (currentStep >= 2) {
                document.getElementById('keyPoint1').classList.add('visible');
            } else {
                document.getElementById('keyPoint1').classList.remove('visible');
            }

            // Step 3: Show second key point
            if (currentStep >= 3) {
                document.getElementById('keyPoint2').classList.add('visible');
            } else {
                document.getElementById('keyPoint2').classList.remove('visible');
            }

            // Step 4: Show third key point
            if (currentStep >= 4) {
                document.getElementById('keyPoint3').classList.add('visible');
            } else {
                document.getElementById('keyPoint3').classList.remove('visible');
            }

            // Update controls
            document.getElementById('currentStep').textContent = currentStep + 1;
            document.getElementById('totalSteps').textContent = totalSteps;
            document.getElementById('prevAnim').disabled = currentStep === 0;
            document.getElementById('nextAnim').disabled = currentStep >= totalSteps - 1;
            
            // Update exposed state to parent (must be updated here, not just at init)
            window.currentAnimationStep = currentStep;
            window.totalAnimationSteps = totalSteps;
        }

        // Expose state to parent (initial values)
        window.currentAnimationStep = currentStep;
        window.totalAnimationSteps = totalSteps;

        // Initialize
        window.addEventListener('load', () => {
            updateDisplay();
        });

        // Listen for messages from parent
        window.addEventListener('message', function(event) {
            if (event.data && event.data.type === 'requestAnimationState') {
                window.parent.postMessage({
                    type: 'animationState',
                    currentStep: currentStep + 1,
                    totalSteps: totalSteps,
                    canGoPrev: currentStep > 0,
                    canGoNext: currentStep < totalSteps - 1
                }, '*');
            }
        });
    </script>
</body>
</html>

