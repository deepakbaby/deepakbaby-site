{{/*  setup Sass options  */}}
{{- $options := partial "helpers/get-sass-options.html" -}}
{{- $options = $options | merge (dict "targetPath" "application.css") -}}

{{/*  Compile hugo template `application.template.scss` into `application.scss`.  */}}
{{- $template := resources.Get "styles/application.template.scss" -}}
{{- $scss := $template | resources.ExecuteAsTemplate "styles/application.scss" . -}}

{{/*  Bundle application.scss  */}}
{{- $bundle := $scss | css.Sass $options | fingerprint -}}
{{/* Preload CSS for better performance */}}
<link rel="preload" href="{{ $bundle.RelPermalink }}" as="style" integrity="{{ $bundle.Data.Integrity }}" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="{{ $bundle.RelPermalink }}" integrity="{{ $bundle.Data.Integrity }}" /></noscript>
