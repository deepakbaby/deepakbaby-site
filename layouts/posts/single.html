{{ define "header" }}
<meta name="description" content="{{ if .Description }}{{ .Description }}{{ else }}{{ .Title }}{{ end }}" />
{{ with .Params.relcanonical }}
<link rel="canonical" href="{{ . | relLangURL }}" itemprop="url" />
{{ end }}

<!-- KaTeX for Math Rendering -->
{{ if site.Params.features.math.enable }}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
{{ end }}
{{ end }}

{{ define "navbar" }}
{{ partial "navigators/modern-navbar.html" . }}
{{ end }}

{{ define "content" }}
<style>
    /* Override default wrapper styles for posts */
    .type-posts .container-fluid.wrapper {
        max-width: none !important;
        width: 100% !important;
        padding: 0 !important;
        margin: 0 !important;
        overflow-x: hidden !important;
    }

    body.type-posts {
        overflow-x: hidden !important;
        width: 100vw !important;
        max-width: 100vw !important;
    }

    html {
        overflow-x: hidden !important;
    }
</style>
<div class="modern-post-wrapper">
    <!-- Hero Section with Image -->
    <section class="post-hero-section">
        <div class="post-hero-overlay"></div>
        {{ $hero := partial "helpers/get-hero.html" . }}
        {{ if $hero }}
        <div class="post-hero-image" style="background-image: url({{ $hero }});"></div>
        {{ end }}

        <div class="post-hero-content">
            <div class="post-meta-badges">
                {{ if .Params.tags }}
                <span class="post-category-badge">{{ index .Params.tags 0 }}</span>
                {{ end }}
            </div>

            <h1 class="post-title">{{ .Page.Title }}</h1>

            <div class="post-meta-info">
                {{ if site.Params.features.blog.showAuthor | default true }}
                <div class="post-author">
                    <span class="author-name">{{ partial "helpers/get-author-name.html" . }}</span>
                </div>
                {{ end }}

                <div class="post-date-time">
                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                    </svg>
                    <span>{{ .Page.Date | time.Format ":date_full" }}</span>

                    {{ if site.Params.features.readingTime }}
                    <span class="meta-separator">•</span>
                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    <span>{{ .ReadingTime }} min read</span>
                    {{ end }}
                </div>
            </div>

            {{ if site.Params.features.tags.enable }}
            {{ if .Params.tags }}
            <div class="post-tags-hero">
                {{ range .Params.tags }}
                <a href="{{ "/tags/" | relLangURL }}{{ . | urlize }}" class="tag-link">#{{ . }}</a>
                {{ end }}
            </div>
            {{ end }}
            {{ end }}
        </div>
    </section>

    <!-- Main Content Area -->
    <div class="post-content-container">
        <div class="post-content-grid">
            <!-- Main Article Content -->
            <article class="post-article-content">
                <div class="prose-content" id="post-content">
                    {{ .Page.Content }}
                </div>

                <!-- Share Buttons -->
                {{ if site.Params.features.blog.shareButtons }}
                <div class="share-section">
                    <h4 class="share-title">Share this post</h4>
                    <div class="share-buttons">
                        {{ if site.Params.features.blog.shareButtons.facebook }}
                        <a class="share-btn share-facebook" href="https://www.facebook.com/sharer.php?u={{ .Permalink }}" target="_blank" rel="noopener" aria-label="Share on Facebook">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        {{ end }}

                        {{ if site.Params.features.blog.shareButtons.twitter }}
                        <a class="share-btn share-twitter" href="https://twitter.com/share?url={{ .Permalink }}&text={{ .Title }}" target="_blank" rel="noopener" aria-label="Share on Twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                        {{ end }}

                        {{ if site.Params.features.blog.shareButtons.linkedin }}
                        <a class="share-btn share-linkedin" href="https://www.linkedin.com/shareArticle?url={{ .Permalink }}&title={{ .Title }}" target="_blank" rel="noopener" aria-label="Share on LinkedIn">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                        {{ end }}

                        {{ if site.Params.features.blog.shareButtons.reddit }}
                        <a class="share-btn share-reddit" href="https://reddit.com/submit?url={{ .Permalink }}&title={{ .Title }}" target="_blank" rel="noopener" aria-label="Share on Reddit">
                            <i class="fab fa-reddit-alien"></i>
                        </a>
                        {{ end }}

                        {{ if site.Params.features.blog.shareButtons.whatsapp }}
                        <a class="share-btn share-whatsapp" href="https://api.whatsapp.com/send?text={{ .Title }} {{ .Permalink }}" target="_blank" rel="noopener" aria-label="Share on WhatsApp">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                        {{ end }}

                        {{ if site.Params.features.blog.shareButtons.email }}
                        <a class="share-btn share-email" href="mailto:?subject={{ .Title }}&body={{ .Permalink }}" aria-label="Share via Email">
                            <i class="fas fa-envelope"></i>
                        </a>
                        {{ end }}
                    </div>
                </div>
                {{ end }}

                <!-- Edit Page Link -->
                {{ if site.Params.GitRepo }}
                <div class="improve-page-section">
                    {{ if ( eq site.Params.GitForge "gitlab" ) }}
                    <a href="{{ site.Params.GitRepo }}/-/edit/{{ site.Params.GitBranch | default "main" }}/content/{{ .File.Path }}" class="improve-link" target="_blank" rel="noopener">
                    {{ else if ( eq site.Params.GitForge "gitea" ) }}
                    <a href="{{ site.Params.GitRepo }}/_edit/{{ site.Params.GitBranch | default "main" }}/content/{{ .File.Path }}" class="improve-link" target="_blank" rel="noopener">
                    {{ else }}
                    <a href="{{ site.Params.GitRepo }}/edit/{{ site.Params.GitBranch | default "main" }}/content/{{ .File.Path }}" class="improve-link" target="_blank" rel="noopener">
                    {{ end }}
                        <i class="fas fa-code-branch"></i>
                        <span>Improve this page</span>
                    </a>
                </div>
                {{ end }}

                <!-- Next/Previous Navigation -->
                <nav class="post-navigation">
                    {{ with .PrevInSection }}
                    <a href="{{ .RelPermalink }}" class="nav-card nav-prev">
                        <span class="nav-label">← Previous</span>
                        <span class="nav-title">{{ .Title }}</span>
                    </a>
                    {{ end }}

                    {{ with .NextInSection }}
                    <a href="{{ .RelPermalink }}" class="nav-card nav-next">
                        <span class="nav-label">Next →</span>
                        <span class="nav-title">{{ .Title }}</span>
                    </a>
                    {{ end }}
                </nav>

                <!-- Comments Section -->
                {{ if site.Params.features.comment.enable }}
                <div class="comments-section">
                    <h2 class="comments-heading">
                        <i class="fas fa-comments"></i>
                        Discussion
                    </h2>
                    <div class="comments-content">
                        {{ partial "comments.html" site.Params.features.comment.services }}
                    </div>
                </div>
                {{ end }}

                {{ if .Site.Config.Services.Disqus.Shortname }}
                <div class="comments-section">
                    <h2 class="comments-heading">
                        <i class="fas fa-comments"></i>
                        Discussion
                    </h2>
                    <div class="comments-content">
                        {{ partial "comments/disqus.html" (dict (slice "disqus" "shortName")  .Site.Config.Services.Disqus.Shortname) }}
                    </div>
                </div>
                {{ end }}
            </article>
        </div>
    </div>

    <!-- Scroll to Top Button -->
    <button id="scroll-to-top" class="scroll-top-btn" aria-label="Scroll to top">
        <i class="fas fa-chevron-up"></i>
    </button>
</div>

<style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

    /* ============================================
       GLOBAL RESET & WRAPPER
    ============================================ */
    .modern-post-wrapper {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        background: var(--bg-primary);
        color: var(--text-primary);
        min-height: 100vh;
        padding-top: 5rem;
        width: 100vw;
        max-width: 100vw;
        overflow-x: hidden;
        margin: 0;
        padding-left: 0;
        padding-right: 0;
    }

    /* ============================================
       HERO SECTION
    ============================================ */
    .post-hero-section {
        position: relative;
        min-height: 60vh;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: 4rem 2rem;
        overflow: hidden;
        background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
    }

    [data-theme="light"] .post-hero-section {
        background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
    }

    .post-hero-image {
        position: absolute;
        inset: 0;
        background-size: cover;
        background-position: center;
        opacity: 0.15;
        z-index: 0;
    }

    [data-theme="light"] .post-hero-image {
        opacity: 0.08;
    }

    .post-hero-overlay {
        position: absolute;
        inset: 0;
        background: radial-gradient(circle at 30% 50%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                    radial-gradient(circle at 70% 50%, rgba(139, 92, 246, 0.1) 0%, transparent 50%);
        z-index: 1;
    }

    .post-hero-content {
        position: relative;
        z-index: 2;
        max-width: 900px;
        margin: 0 auto;
    }

    .post-meta-badges {
        margin-bottom: 1.5rem;
    }

    .post-category-badge {
        display: inline-block;
        padding: 0.5rem 1.25rem;
        background: rgba(59, 130, 246, 0.15);
        border: 1px solid rgba(59, 130, 246, 0.3);
        border-radius: 50px;
        color: #60a5fa;
        font-size: 0.85rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    [data-theme="light"] .post-category-badge {
        background: rgba(59, 130, 246, 0.1);
        color: #3b82f6;
    }

    .post-title {
        font-size: clamp(2rem, 5vw, 3.5rem);
        font-weight: 400;
        line-height: 1.1;
        margin: 0 0 2rem 0;
        color: #fff;
        letter-spacing: -0.02em;
    }

    [data-theme="light"] .post-title {
        color: #1e293b;
    }

    .post-meta-info {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 1.5rem;
        flex-wrap: wrap;
        margin-bottom: 1.5rem;
        color: rgba(255, 255, 255, 0.8);
        font-size: 0.95rem;
    }

    [data-theme="light"] .post-meta-info {
        color: #64748b;
    }

    .post-author {
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .author-name {
        font-weight: 600;
    }

    .post-date-time {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: rgba(255, 255, 255, 0.8);
    }

    [data-theme="light"] .post-date-time {
        color: rgba(0, 0, 0, 0.7);
    }

    .post-date-time svg {
        width: 16px;
        height: 16px;
        opacity: 0.7;
    }

    .meta-separator {
        opacity: 0.5;
    }

    .post-tags-hero {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.75rem;
        flex-wrap: wrap;
    }

    .tag-link {
        padding: 0.375rem 1rem;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 50px;
        color: rgba(255, 255, 255, 0.8);
        font-size: 0.85rem;
        font-weight: 500;
        text-decoration: none;
        transition: all 0.3s;
    }

    .tag-link:hover {
        background: rgba(59, 130, 246, 0.2);
        border-color: rgba(59, 130, 246, 0.4);
        color: #60a5fa;
    }

    [data-theme="light"] .tag-link {
        background: rgba(0, 0, 0, 0.04);
        border-color: rgba(0, 0, 0, 0.08);
        color: #64748b;
    }

    [data-theme="light"] .tag-link:hover {
        background: rgba(59, 130, 246, 0.1);
        border-color: rgba(59, 130, 246, 0.3);
        color: #3b82f6;
    }

    /* ============================================
       CONTENT CONTAINER
    ============================================ */
    .post-content-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 4rem 2rem;
    }

    .post-content-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 4rem;
        align-items: start;
        width: 90%;
        margin: 0 auto;
    }

    /* ============================================
       ARTICLE CONTENT
    ============================================ */
    .post-article-content {
        min-width: 0;
    }

    .prose-content {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
        line-height: 1.8;
        font-size: 1.0625rem;
        font-weight: 400;
    }

    /* Prose Typography */
    .prose-content h1,
    .prose-content h2,
    .prose-content h3,
    .prose-content h4,
    .prose-content h5,
    .prose-content h6 {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif !important;
        font-weight: 400 !important;
        line-height: 1.4 !important;
        margin-top: 2.5rem !important;
        margin-bottom: 1rem !important;
        color: var(--text-primary) !important;
        letter-spacing: -0.01em !important;
        border: none !important;
        border-bottom: none !important;
        border-top: none !important;
        text-decoration: none !important;
        box-shadow: none !important;
        pointer-events: none !important;
        cursor: text !important;
    }

    .prose-content h1::before,
    .prose-content h2::before,
    .prose-content h3::before,
    .prose-content h4::before,
    .prose-content h5::before,
    .prose-content h6::before,
    .prose-content h1::after,
    .prose-content h2::after,
    .prose-content h3::after,
    .prose-content h4::after,
    .prose-content h5::after,
    .prose-content h6::after {
        content: none !important;
        border: none !important;
        border-bottom: none !important;
        text-decoration: none !important;
    }

    .prose-content h1:hover,
    .prose-content h2:hover,
    .prose-content h3:hover,
    .prose-content h4:hover,
    .prose-content h5:hover,
    .prose-content h6:hover,
    .prose-content h1:target,
    .prose-content h2:target,
    .prose-content h3:target,
    .prose-content h4:target,
    .prose-content h5:target,
    .prose-content h6:target,
    .prose-content h1[id],
    .prose-content h2[id],
    .prose-content h3[id],
    .prose-content h4[id],
    .prose-content h5[id],
    .prose-content h6[id] {
        text-decoration: none !important;
        border-bottom: none !important;
        cursor: text !important;
    }

    .prose-content h1 { font-size: 2.25rem; }
    .prose-content h2 { font-size: 1.875rem; }
    .prose-content h3 { font-size: 1.5rem; }
    .prose-content h4 { font-size: 1.25rem; }
    .prose-content h5 { font-size: 1.125rem; }
    .prose-content h6 { font-size: 1rem; }

    .prose-content p {
        margin-bottom: 1.5rem;
        color: var(--text-primary);
    }

    .prose-content a {
        color: #3b82f6;
        text-decoration: underline;
        text-underline-offset: 3px;
        transition: color 0.2s;
    }

    .prose-content a:hover {
        color: #60a5fa;
    }

    /* Remove underline from heading anchor links */
    .prose-content h1 a,
    .prose-content h2 a,
    .prose-content h3 a,
    .prose-content h4 a,
    .prose-content h5 a,
    .prose-content h6 a {
        color: inherit !important;
        text-decoration: none !important;
        pointer-events: auto !important;
    }

    .prose-content h1 a:hover,
    .prose-content h2 a:hover,
    .prose-content h3 a:hover,
    .prose-content h4 a:hover,
    .prose-content h5 a:hover,
    .prose-content h6 a:hover {
        color: inherit !important;
        text-decoration: none !important;
    }

    .prose-content ul,
    .prose-content ol {
        margin-bottom: 1.5rem;
        padding-left: 1.75rem;
    }

    .prose-content li {
        margin-bottom: 0.5rem;
    }

    .prose-content blockquote {
        border-left: 4px solid #3b82f6;
        padding-left: 1.5rem;
        margin: 1.5rem 0;
        font-style: italic;
        color: var(--text-secondary);
    }

    .prose-content code {
        background: rgba(59, 130, 246, 0.1);
        padding: 0.2em 0.4em;
        border-radius: 4px;
        font-size: 0.9em;
        font-family: 'Courier New', monospace;
        color: #3b82f6;
    }

    [data-theme="light"] .prose-content code {
        background: rgba(59, 130, 246, 0.08);
    }

    .prose-content pre {
        background: rgba(0, 0, 0, 0.3);
        padding: 1.5rem;
        border-radius: 12px;
        overflow-x: auto;
        margin: 1.5rem 0;
        border: 1px solid rgba(255, 255, 255, 0.1);
    }

    [data-theme="light"] .prose-content pre {
        background: #f8fafc;
        border-color: rgba(0, 0, 0, 0.08);
    }

    .prose-content pre code {
        background: none;
        padding: 0;
        color: inherit;
    }

    .prose-content img {
        max-width: 100%;
        height: auto;
        border-radius: 12px;
        margin: 2rem 0;
    }

    .prose-content table {
        width: 100%;
        border-collapse: collapse;
        margin: 1.5rem 0;
    }

    .prose-content th,
    .prose-content td {
        border: 1px solid rgba(255, 255, 255, 0.1);
        padding: 0.75rem;
        text-align: left;
    }

    [data-theme="light"] .prose-content th,
    [data-theme="light"] .prose-content td {
        border-color: rgba(0, 0, 0, 0.08);
    }

    .prose-content th {
        background: rgba(59, 130, 246, 0.1);
        font-weight: 600;
    }

    .prose-content hr {
        border: none;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        margin: 3rem 0;
    }

    [data-theme="light"] .prose-content hr {
        border-top-color: rgba(0, 0, 0, 0.08);
    }

    /* Math rendering styles */
    .prose-content .katex {
        font-size: 1.1em;
    }

    .prose-content .katex-display {
        overflow-x: auto;
        overflow-y: hidden;
        padding: 1rem 0;
    }

    /* ============================================
       SHARE SECTION
    ============================================ */
    .share-section {
        margin-top: 4rem;
        padding-top: 2rem;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    [data-theme="light"] .share-section {
        border-top-color: rgba(0, 0, 0, 0.08);
    }

    .share-title {
        font-size: 1.125rem;
        font-weight: 600;
        margin-bottom: 1rem;
        color: var(--text-primary);
    }

    .share-buttons {
        display: flex;
        gap: 0.75rem;
        flex-wrap: wrap;
    }

    .share-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 44px;
        height: 44px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: var(--text-secondary);
        text-decoration: none;
        transition: all 0.3s;
    }

    .share-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    .share-facebook:hover { background: #1877f2; border-color: #1877f2; color: #fff; }
    .share-twitter:hover { background: #1da1f2; border-color: #1da1f2; color: #fff; }
    .share-linkedin:hover { background: #0a66c2; border-color: #0a66c2; color: #fff; }
    .share-reddit:hover { background: #ff4500; border-color: #ff4500; color: #fff; }
    .share-whatsapp:hover { background: #25d366; border-color: #25d366; color: #fff; }
    .share-email:hover { background: #6b7280; border-color: #6b7280; color: #fff; }

    /* ============================================
       IMPROVE PAGE & NAVIGATION
    ============================================ */
    .improve-page-section {
        margin-top: 3rem;
        text-align: center;
    }

    .improve-link {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.75rem 1.5rem;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 50px;
        color: var(--text-secondary);
        text-decoration: none;
        font-weight: 500;
        transition: all 0.3s;
    }

    .improve-link:hover {
        background: rgba(59, 130, 246, 0.1);
        border-color: rgba(59, 130, 246, 0.3);
        color: #3b82f6;
    }

    .post-navigation {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        margin-top: 4rem;
    }

    .nav-card {
        padding: 1.5rem;
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 12px;
        text-decoration: none;
        transition: all 0.3s;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    [data-theme="light"] .nav-card {
        background: rgba(255, 255, 255, 0.6);
        border-color: rgba(0, 0, 0, 0.08);
    }

    .nav-card:hover {
        border-color: rgba(59, 130, 246, 0.3);
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(59, 130, 246, 0.1);
    }

    .nav-label {
        font-size: 0.875rem;
        color: var(--text-muted);
        font-weight: 500;
    }

    .nav-title {
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--text-primary);
    }

    /* ============================================
       COMMENTS SECTION
    ============================================ */
    .comments-section {
        margin-top: 5rem;
        padding-top: 3rem;
        border-top: 2px solid rgba(255, 255, 255, 0.1);
    }

    [data-theme="light"] .comments-section {
        border-top-color: rgba(0, 0, 0, 0.08);
    }

    .comments-heading {
        font-size: 1.75rem;
        font-weight: 700;
        margin-bottom: 2rem;
        color: var(--text-primary);
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .comments-heading i {
        color: #3b82f6;
    }

    /* ============================================
       SCROLL TO TOP BUTTON
    ============================================ */
    .scroll-top-btn {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background: rgba(59, 130, 246, 0.9);
        border: none;
        color: #fff;
        font-size: 1.25rem;
        cursor: pointer;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s;
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        z-index: 100;
    }

    .scroll-top-btn.visible {
        opacity: 1;
        visibility: visible;
    }

    .scroll-top-btn:hover {
        background: #3b82f6;
        transform: translateY(-4px);
        box-shadow: 0 8px 20px rgba(59, 130, 246, 0.4);
    }

    /* ============================================
       RESPONSIVE DESIGN
    ============================================ */
    @media (max-width: 768px) {
        .modern-post-wrapper {
            padding-top: 4rem;
        }

        .post-hero-section {
            min-height: 50vh;
            padding: 3rem 1.5rem;
        }

        .post-title {
            font-size: 2rem;
        }

        .post-meta-info {
            flex-direction: column;
            gap: 1rem;
        }

        .post-content-container {
            padding: 2rem 1.5rem;
        }

        .post-content-grid {
            width: 90%;
        }

        .prose-content {
            font-size: 1rem;
        }

        .prose-content h1 { font-size: 1.875rem; }
        .prose-content h2 { font-size: 1.5rem; }
        .prose-content h3 { font-size: 1.25rem; }

        .scroll-top-btn {
            bottom: 1.5rem;
            right: 1.5rem;
            width: 44px;
            height: 44px;
        }
    }
</style>

<script>
(function() {
    'use strict';

    // Scroll to top functionality
    const scrollBtn = document.getElementById('scroll-to-top');

    window.addEventListener('scroll', () => {
        if (window.pageYOffset > 300) {
            scrollBtn.classList.add('visible');
        } else {
            scrollBtn.classList.remove('visible');
        }
    });

    scrollBtn.addEventListener('click', () => {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    });

})();
</script>
{{ end }}

{{ define "scripts" }}
<!-- KaTeX Math Rendering -->
{{ if site.Params.features.math.enable }}
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"
    onload="renderMathInElement(document.body, {
        delimiters: [
            {left: '$$', right: '$$', display: true},
            {left: '\\[', right: '\\]', display: true},
            {left: '$', right: '$', display: false},
            {left: '\\(', right: '\\)', display: false}
        ],
        throwOnError: false,
        strict: false
    });"></script>
{{ end }}
{{ end }}
