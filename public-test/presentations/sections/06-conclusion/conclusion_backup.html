<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conclusion - Distributed Training</title>
    <!-- Updated: Left-to-right flowchart layout v3.0 - Using AnimationController properly -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Unified Design System -->
    <link rel="stylesheet" href="../../shared-styles.css">
    <style>
        /* Page-specific styles only - everything else from shared-styles.css */
        html, body {
            height: 100%;
            width: 100%;
        }

        /* Enhanced background glow effect */
        .bg-glow {
            position: fixed;
            top: 0; left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 0;
        }

        .bg-glow::before, .bg-glow::after {
            content: '';
            position: absolute;
            border-radius: 50%;
            filter: blur(100px);
            opacity: 0.4;
            animation: glow-pulse 4s ease-in-out infinite;
        }

        .bg-glow::before {
            width: 700px;
            height: 700px;
            left: -250px;
            top: 10%;
            background: radial-gradient(circle, var(--color-accent-primary) 0%, transparent 70%);
        }

        .bg-glow::after {
            width: 500px;
            height: 500px;
            right: -150px;
            bottom: 10%;
            background: radial-gradient(circle, var(--color-accent-attention) 0%, transparent 70%);
            animation-delay: 2s;
        }

        /* Page container system */
        .page-container {
            position: absolute;
            top: 0; left: 0;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.7s var(--ease-bounce);
            z-index: var(--z-elevated);
        }

        .page-container.active {
            opacity: 1;
            pointer-events: all;
        }

        /* Flowchart Styles */
        .flowchart-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 80vh;
            width: 100vw;
            max-width: 1600px;
            margin: 0 auto;
            padding: var(--space-6);
        }

        .flowchart-title {
            font-size: var(--font-size-3xl);
            font-weight: var(--font-weight-bold);
            color: var(--color-text-white);
            text-align: center;
            margin-bottom: var(--space-3);
            letter-spacing: -0.02em;
            text-shadow: var(--glow-primary);
            opacity: 0;
            transform: translateY(-40px) scale(0.95);
            transition: all var(--timing-slower) var(--ease-bounce);
        }

        .flowchart-title.visible {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        .flowchart-subtitle {
            font-size: var(--font-size-md);
            color: var(--color-accent-primary);
            text-align: center;
            margin-bottom: var(--space-8);
            opacity: 0;
            transform: translateY(20px);
            transition: all var(--timing-slower) var(--ease-bounce) 200ms;
        }

        .flowchart-subtitle.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .flowchart-container {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: flex-start;
            gap: 40px;
            width: 100%;
            padding: 24px;
            position: relative;
        }

        /* Flowchart shape types */
        .flowchart-shape {
            position: relative;
            opacity: 0;
            transform: scale(0.9);
            transition: all var(--timing-smooth) var(--ease-bounce);
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 180px;
            backdrop-filter: var(--blur-md);
        }

        .flowchart-shape.visible {
            opacity: 1;
            transform: scale(1);
        }

        .flowchart-shape:hover {
            transform: scale(1.05);
        }

        /* Diamond (Decision) shape */
        .diamond {
            width: 200px;
            height: 200px;
            background: linear-gradient(135deg, rgba(74, 158, 255, 0.12) 0%, var(--color-bg-card) 100%);
            transform: rotate(45deg) scale(0.9);
            border: 3px solid var(--color-accent-primary);
            box-shadow: var(--shadow-lg), var(--glow-primary);
            position: relative;
        }

        .diamond.visible {
            opacity: 1;
            transform: rotate(45deg) scale(1);
        }

        .diamond:hover {
            transform: rotate(45deg) scale(1.05);
            box-shadow: var(--shadow-xl), var(--glow-primary-lg);
        }

        .diamond-content {
            transform: rotate(-45deg);
            text-align: center;
            padding: var(--space-4);
            font-size: var(--font-size-sm);
            line-height: var(--line-height-tight);
            color: var(--color-text-white);
            font-weight: var(--font-weight-semibold);
            max-width: 120px;
        }

        /* Rectangle (Process/Action) shape */
        .rectangle {
            min-width: 180px;
            max-width: 220px;
            padding: var(--space-4) var(--space-5);
            background: linear-gradient(135deg, rgba(46, 213, 115, 0.08) 0%, var(--color-bg-card) 100%);
            border: 3px solid var(--color-accent-success);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg), 0 0 20px rgba(46, 213, 115, 0.3);
            text-align: center;
        }

        .rectangle:hover {
            box-shadow: var(--shadow-xl), 0 0 30px rgba(46, 213, 115, 0.5);
        }

        .rectangle.fsdp {
            border-color: var(--color-accent-attention);
            background: linear-gradient(135deg, rgba(255, 184, 0, 0.08) 0%, var(--color-bg-card) 100%);
            box-shadow: var(--shadow-lg), 0 0 20px rgba(255, 184, 0, 0.3);
        }

        .rectangle.fsdp:hover {
            box-shadow: var(--shadow-xl), 0 0 30px rgba(255, 184, 0, 0.5);
        }

        .rectangle.pipeline {
            border-color: var(--color-accent-warning);
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.08) 0%, var(--color-bg-card) 100%);
            box-shadow: var(--shadow-lg), 0 0 20px rgba(255, 107, 107, 0.3);
        }

        .rectangle.pipeline:hover {
            box-shadow: var(--shadow-xl), 0 0 30px rgba(255, 107, 107, 0.5);
        }

        /* Rounded Rectangle (Terminal/Note) shape */
        .rounded-rectangle {
            min-width: 160px;
            max-width: 200px;
            padding: var(--space-3) var(--space-4);
            background: var(--color-bg-card);
            border: 2px solid rgba(74, 158, 255, 0.4);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-md);
            text-align: center;
        }

        .rounded-rectangle.fsdp {
            border-color: rgba(255, 184, 0, 0.4);
        }

        .rounded-rectangle.pipeline {
            border-color: rgba(255, 107, 107, 0.4);
        }

        .shape-label {
            font-size: var(--font-size-xs);
            color: var(--color-accent-primary);
            margin-bottom: var(--space-1);
            font-weight: var(--font-weight-bold);
            letter-spacing: 0.05em;
            text-transform: uppercase;
        }

        .rectangle.fsdp .shape-label,
        .rounded-rectangle.fsdp .shape-label {
            color: var(--color-accent-attention);
        }

        .rectangle.pipeline .shape-label,
        .rounded-rectangle.pipeline .shape-label {
            color: var(--color-accent-warning);
        }

        .rectangle .shape-label {
            color: var(--color-accent-success);
        }

        .shape-text {
            font-size: var(--font-size-base);
            line-height: var(--line-height-relaxed);
            color: var(--color-text-white);
            font-weight: var(--font-weight-medium);
        }

        .rounded-rectangle .shape-text {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
        }

        /* Column layout for flowchart stages */
        .flowchart-stage {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 60px;
            position: relative;
        }

        /* Arrow connectors */
        .arrow-connector {
            position: relative;
            height: 3px;
            min-width: 60px;
            background: linear-gradient(90deg, var(--color-accent-primary) 0%, var(--color-accent-success) 100%);
            opacity: 0;
            transform: scaleX(0.3);
            transition: all var(--timing-slow) var(--ease-bounce);
            box-shadow: 0 0 8px rgba(74, 158, 255, 0.5);
        }

        .arrow-connector.visible {
            opacity: 1;
            transform: scaleX(1);
        }

        .arrow-connector::after {
            content: '';
            position: absolute;
            right: -10px;
            top: 50%;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-top: 8px solid transparent;
            border-bottom: 8px solid transparent;
            border-left: 12px solid var(--color-accent-success);
            filter: drop-shadow(0 0 6px rgba(46, 213, 115, 0.7));
        }

        /* Branch connectors */
        .branch-connector {
            position: absolute;
            opacity: 0;
            transition: all var(--timing-slow) var(--ease-bounce);
        }

        .branch-connector.visible {
            opacity: 1;
        }

        /* Branch line (L-shaped) */
        .branch-line {
            position: absolute;
            background: var(--color-accent-primary);
            box-shadow: 0 0 8px rgba(74, 158, 255, 0.5);
        }

        .branch-line.horizontal {
            height: 3px;
            width: 40px;
        }

        .branch-line.vertical {
            width: 3px;
            height: 60px;
        }

        /* Branch labels (YES/NO) */
        .branch-label {
            position: absolute;
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-bold);
            letter-spacing: 0.08em;
            text-transform: uppercase;
            padding: var(--space-1) var(--space-3);
            border-radius: var(--radius-sm);
            opacity: 0;
            transition: all var(--timing-normal) var(--ease-bounce);
            z-index: 10;
        }

        .branch-label.visible {
            opacity: 1;
        }

        .branch-label.yes {
            color: var(--color-accent-success);
            background: rgba(46, 213, 115, 0.1);
            border: 1px solid rgba(46, 213, 115, 0.3);
            text-shadow: 0 0 10px rgba(46, 213, 115, 0.5);
        }

        .branch-label.no {
            color: var(--color-accent-warning);
            background: rgba(255, 107, 107, 0.1);
            border: 1px solid rgba(255, 107, 107, 0.3);
            text-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
        }

        /* Summary Page Styles */
        .summary-container {
            max-width: 1400px;
            width: 100vw;
            min-height: 80vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: var(--space-7);
        }

        .summary-title {
            font-size: var(--font-size-3xl);
            font-weight: var(--font-weight-bold);
            color: var(--color-text-white);
            text-align: center;
            margin-bottom: var(--space-8);
            letter-spacing: -0.02em;
            text-shadow: var(--glow-primary);
            opacity: 0;
            transform: translateY(-30px);
            transition: all var(--timing-slower) var(--ease-bounce);
        }

        .summary-title.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .techniques-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: var(--space-7);
            width: 100%;
            max-width: 1300px;
        }

        .technique-card {
            background: var(--color-bg-card);
            border: 3px solid rgba(74, 158, 255, 0.3);
            border-radius: var(--radius-xl);
            padding: var(--space-7) var(--space-6);
            box-shadow: var(--shadow-lg);
            backdrop-filter: var(--blur-md);
            opacity: 0;
            transform: translateY(40px) scale(0.95);
            transition: all var(--timing-slower) var(--ease-bounce);
        }

        .technique-card.visible {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        .technique-card:hover {
            border-color: var(--color-accent-primary);
            transform: translateY(-8px) scale(1.02);
            box-shadow: var(--shadow-xl), var(--glow-primary);
        }

        .technique-name {
            font-size: var(--font-size-xl);
            font-weight: var(--font-weight-bold);
            color: var(--color-accent-primary);
            margin-bottom: var(--space-5);
            display: flex;
            align-items: center;
            gap: var(--space-4);
            text-shadow: var(--glow-primary);
        }

        .technique-icon {
            font-size: 2.8rem;
            filter: drop-shadow(0 0 12px rgba(74, 158, 255, 0.6));
        }

        .technique-description {
            font-size: var(--font-size-base);
            line-height: var(--line-height-relaxed);
            color: var(--color-text-secondary);
            margin-bottom: var(--space-5);
        }

        .technique-key-points {
            list-style: none;
            padding: 0;
        }

        .technique-key-points li {
            font-size: var(--font-size-sm);
            color: var(--color-text-tertiary);
            padding: var(--space-2) 0 var(--space-2) var(--space-7);
            position: relative;
            transition: all var(--timing-fast) var(--ease-standard);
        }

        .technique-key-points li::before {
            content: 'â–¸';
            position: absolute;
            left: 0;
            color: var(--color-accent-primary);
            font-weight: var(--font-weight-bold);
            font-size: var(--font-size-md);
        }

        .technique-key-points li:hover {
            color: var(--color-text-secondary);
            padding-left: calc(var(--space-7) + var(--space-2));
        }

        /* Thank You Page Styles */
        .thank-you-container {
            max-width: 1000px;
            width: 100vw;
            text-align: center;
            margin: 0 auto;
            padding-top: var(--space-8);
            position: relative;
            z-index: 2;
        }

        /* Animated Background Graphics */
        .thank-you-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 1;
            pointer-events: none;
        }

        .bg-circuit {
            position: absolute;
            opacity: 0.15;
            animation: float 6s ease-in-out infinite;
        }

        .bg-circuit-1 {
            top: 10%;
            left: 5%;
            width: 200px;
            height: 200px;
            animation-delay: 0s;
        }

        .bg-circuit-2 {
            top: 60%;
            right: 8%;
            width: 180px;
            height: 180px;
            animation-delay: 2s;
        }

        .bg-circuit-3 {
            bottom: 15%;
            left: 10%;
            width: 150px;
            height: 150px;
            animation-delay: 4s;
        }

        .bg-neuron-network {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 800px;
            height: 800px;
            opacity: 0.08;
        }

        .neuron-node {
            position: absolute;
            width: 12px;
            height: 12px;
            background: radial-gradient(circle, var(--color-accent-primary), transparent);
            border-radius: 50%;
            box-shadow: 0 0 20px var(--color-accent-primary);
            animation: pulse-glow 3s ease-in-out infinite;
        }

        .neuron-line {
            position: absolute;
            height: 2px;
            background: linear-gradient(90deg,
                transparent 0%,
                var(--color-accent-primary) 50%,
                transparent 100%);
            transform-origin: left center;
            opacity: 0.4;
            animation: flow-line 4s linear infinite;
        }

        @keyframes pulse-glow {
            0%, 100% {
                transform: scale(1);
                opacity: 0.6;
            }
            50% {
                transform: scale(1.5);
                opacity: 1;
            }
        }

        @keyframes flow-line {
            0% {
                background-position: -200% 0;
            }
            100% {
                background-position: 200% 0;
            }
        }

        .floating-particle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: var(--color-accent-success);
            border-radius: 50%;
            opacity: 0.3;
            animation: float-particle 8s ease-in-out infinite;
            box-shadow: 0 0 15px var(--color-accent-success);
        }

        @keyframes float-particle {
            0%, 100% {
                transform: translate(0, 0) scale(1);
                opacity: 0.3;
            }
            25% {
                transform: translate(50px, -80px) scale(1.2);
                opacity: 0.6;
            }
            50% {
                transform: translate(-30px, -150px) scale(0.8);
                opacity: 0.4;
            }
            75% {
                transform: translate(80px, -100px) scale(1.5);
                opacity: 0.7;
            }
        }

        .thank-you-title {
            font-size: var(--font-size-4xl);
            font-weight: var(--font-weight-bold);
            color: var(--color-text-white);
            margin-bottom: var(--space-5);
            letter-spacing: -0.02em;
            text-shadow: var(--glow-primary-lg);
            opacity: 0;
            transform: scale(0.8);
            transition: all 1s var(--ease-bounce);
        }

        .thank-you-title.visible {
            opacity: 1;
            transform: scale(1);
        }

        .thank-you-subtitle {
            font-size: var(--font-size-xl);
            color: var(--color-accent-primary);
            margin-bottom: var(--space-6);
            opacity: 0;
            transform: translateY(20px);
            transition: all 1s var(--ease-bounce) 300ms;
        }

        .thank-you-subtitle.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Enhanced Graphics Section */
        .thank-you-graphics {
            margin-top: var(--space-7);
            opacity: 0;
            transform: translateY(30px);
            transition: all 1s var(--ease-bounce) 600ms;
        }

        .thank-you-graphics.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .graphics-main {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: var(--space-9);
            margin-bottom: var(--space-7);
        }

        .graphic-item-large {
            font-size: 6rem;
            color: var(--color-accent-primary);
            animation: float 3s ease-in-out infinite;
            filter: drop-shadow(0 0 30px rgba(74, 158, 255, 0.8));
        }

        .graphic-item-large:nth-child(2) {
            animation-delay: 0.5s;
            color: var(--color-accent-success);
            filter: drop-shadow(0 0 30px rgba(46, 213, 115, 0.8));
        }

        .graphic-item-large:nth-child(3) {
            animation-delay: 1s;
            color: var(--color-accent-attention);
            filter: drop-shadow(0 0 30px rgba(255, 184, 0, 0.8));
        }

        /* Achievement Badges */
        .achievement-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: var(--space-5);
            max-width: 800px;
            margin: var(--space-7) auto 0;
        }

        .achievement-badge {
            background: var(--color-bg-card);
            border: 2px solid rgba(74, 158, 255, 0.3);
            border-radius: var(--radius-lg);
            padding: var(--space-5);
            backdrop-filter: var(--blur-md);
            transition: all var(--timing-normal) var(--ease-standard);
            opacity: 0;
            transform: scale(0.9);
            animation: popIn 0.6s var(--ease-bounce) forwards;
        }

        .achievement-badge:nth-child(1) { animation-delay: 800ms; }
        .achievement-badge:nth-child(2) { animation-delay: 900ms; }
        .achievement-badge:nth-child(3) { animation-delay: 1000ms; }
        .achievement-badge:nth-child(4) { animation-delay: 1100ms; }

        @keyframes popIn {
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .achievement-badge:hover {
            border-color: var(--color-accent-primary);
            transform: translateY(-4px) scale(1.05);
            box-shadow: var(--shadow-lg), var(--glow-primary);
        }

        .achievement-icon {
            font-size: 2.5rem;
            margin-bottom: var(--space-3);
        }

        .achievement-text {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
            font-weight: var(--font-weight-medium);
        }

        /* Contact Info */
        .contact-info {
            margin-top: var(--space-7);
            padding: var(--space-6);
            background: var(--color-bg-card);
            border: 2px solid rgba(74, 158, 255, 0.2);
            border-radius: var(--radius-lg);
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            backdrop-filter: var(--blur-md);
            opacity: 0;
            animation: fadeInUp 0.8s var(--ease-bounce) 1.2s forwards;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .contact-info h3 {
            font-size: var(--font-size-lg);
            color: var(--color-accent-primary);
            margin-bottom: var(--space-4);
            font-weight: var(--font-weight-semibold);
        }

        .contact-item {
            font-size: var(--font-size-base);
            color: var(--color-text-secondary);
            margin-bottom: var(--space-2);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-3);
        }

        .contact-icon {
            font-size: 1.3rem;
        }

        /* Responsive Design */
        @media (max-width: 1400px) {
            .flowchart-container {
                gap: var(--space-4);
                transform: scale(0.9);
            }

            .diamond {
                width: 160px;
                height: 160px;
            }

            .diamond-content {
                font-size: var(--font-size-xs);
                max-width: 100px;
            }

            .rectangle {
                min-width: 150px;
                max-width: 180px;
                padding: var(--space-3) var(--space-4);
            }

            .arrow-connector {
                min-width: 40px;
            }

            .flowchart-stage {
                gap: 48px;
            }
        }

        @media (max-width: 1100px) {
            .flowchart-container {
                flex-direction: column;
                gap: 40px;
                transform: scale(1);
            }

            .flowchart-stage {
                flex-direction: row;
                gap: 80px;
            }

            .arrow-connector {
                width: 3px;
                height: 50px;
                min-width: auto;
                transform: scaleY(0.3);
            }

            .arrow-connector.visible {
                transform: scaleY(1);
            }

            .arrow-connector::after {
                right: auto;
                left: 50%;
                top: auto;
                bottom: -10px;
                transform: translateX(-50%);
                border-left: 8px solid transparent;
                border-right: 8px solid transparent;
                border-top: 12px solid var(--color-accent-success);
                border-bottom: none;
            }

            .branch-label {
                top: -35px;
                left: 50%;
                transform: translateX(-50%);
            }

            .branch-label.visible {
                transform: translateX(-50%);
            }
        }

        @media (max-width: 900px) {
            .techniques-grid {
                grid-template-columns: 1fr;
            }

            .flowchart-stage {
                flex-direction: column;
                gap: 40px;
            }

            .graphics-main {
                flex-wrap: wrap;
                gap: 48px;
            }

            .achievement-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .flowchart-title,
            .summary-title {
                font-size: var(--font-size-2xl);
            }

            .thank-you-title {
                font-size: var(--font-size-3xl);
            }

            .technique-card {
                padding: 24px 16px;
            }

            .flowchart-wrapper,
            .summary-container {
                padding: 24px;
            }

            .diamond {
                width: 140px;
                height: 140px;
            }

            .diamond-content {
                font-size: 11px;
                max-width: 85px;
            }

            .rectangle {
                min-width: 130px;
                max-width: 160px;
            }

            .shape-text {
                font-size: var(--font-size-sm);
            }

            .graphic-item-large {
                font-size: 4rem;
            }

            .achievement-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="bg-glow"></div>

    <!-- Page 1: Decision Flowchart -->
    <div class="page-container active" id="page1">
        <div class="flowchart-wrapper">
            <h1 class="flowchart-title" id="flowchartTitle">Choosing the Right Strategy</h1>
            <p class="flowchart-subtitle" id="flowchartSubtitle">Decision flowchart for distributed training</p>

            <div class="flowchart-container">
                <!-- Stage 1: First Decision -->
                <div class="flowchart-shape diamond" id="decision1" role="article" aria-label="Decision: Does model fit on single GPU?">
                    <div class="diamond-content">Does model fit on single GPU?</div>
                </div>

                <!-- Arrow after first decision -->
                <div class="arrow-connector" id="arrow1" role="presentation"></div>

                <!-- Stage 2: DDP (YES) and Second Decision (NO) -->
                <div class="flowchart-stage">
                    <!-- YES path - DDP -->
                    <div style="position: relative;">
                        <div class="branch-label yes" id="yesLabel1">YES</div>
                        <div class="flowchart-shape rectangle" id="ddpBox" role="article" aria-label="Solution: Use DDP">
                            <div class="shape-label">Solution</div>
                            <div class="shape-text">Use DDP</div>
                        </div>
                    </div>

                    <!-- NO path - Second Decision -->
                    <div style="position: relative;">
                        <div class="branch-label no" id="noLabel1">NO</div>
                        <div class="flowchart-shape diamond" id="decision2" role="article" aria-label="Decision: Fast interconnect?">
                            <div class="diamond-content">Fast interconnect?</div>
                        </div>
                    </div>
                </div>

                <!-- Arrow after second column -->
                <div class="arrow-connector" id="arrow2" role="presentation"></div>

                <!-- Stage 3: FSDP (YES) and Pipeline (NO) -->
                <div class="flowchart-stage">
                    <!-- YES path - FSDP -->
                    <div style="position: relative;">
                        <div class="branch-label yes" id="yesLabel2">YES</div>
                        <div class="flowchart-shape rectangle fsdp" id="fsdpBox" role="article" aria-label="Solution: Use FSDP">
                            <div class="shape-label">Solution</div>
                            <div class="shape-text">Use FSDP</div>
                        </div>
                    </div>

                    <!-- NO path - Pipeline -->
                    <div style="position: relative;">
                        <div class="branch-label no" id="noLabel2">NO</div>
                        <div class="flowchart-shape rectangle pipeline" id="pipelineBox" role="article" aria-label="Solution: Use Pipeline Parallelism">
                            <div class="shape-label">Solution</div>
                            <div class="shape-text">Pipeline Parallelism</div>
                        </div>
                    </div>
                </div>

                <!-- Arrow after third column -->
                <div class="arrow-connector" id="arrow3" role="presentation"></div>

                <!-- Stage 4: Additional Notes -->
                <div class="flowchart-stage">
                    <!-- FSDP Note -->
                    <div class="flowchart-shape rounded-rectangle fsdp" id="fsdpNote" role="note" aria-label="Note about FSDP">
                        <div class="shape-text">Combine with Pipeline for very large models</div>
                    </div>

                    <!-- Pipeline Note -->
                    <div class="flowchart-shape rounded-rectangle pipeline" id="pipelineNote" role="note" aria-label="Note about Pipeline">
                        <div class="shape-text">Consider combining with DDP or FSDP</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Page 2: Summary -->
    <div class="page-container" id="page2">
        <div class="summary-container">
            <h1 class="summary-title" id="summaryTitle">Summary</h1>

            <div class="techniques-grid">
                <article class="technique-card" id="ddpSummary" aria-label="DDP Summary">
                    <div class="technique-name">
                        <span class="technique-icon" role="img" aria-label="DDP icon">ðŸ”„</span>
                        <span>DDP</span>
                    </div>
                    <div class="technique-description">
                        Replicates the model across GPUs, each processing different data batches.
                    </div>
                    <ul class="technique-key-points">
                        <li>Same model on all GPUs</li>
                        <li>Different data batches</li>
                        <li>Gradient synchronization</li>
                        <li>Linear speedup</li>
                    </ul>
                </article>

                <article class="technique-card" id="pipelineSummary" aria-label="Pipeline Parallelism Summary">
                    <div class="technique-name">
                        <span class="technique-icon" role="img" aria-label="Pipeline icon">ðŸ”€</span>
                        <span>Pipeline Parallelism</span>
                    </div>
                    <div class="technique-description">
                        Splits model layers across GPUs in a pipeline, with data flowing sequentially through stages.
                    </div>
                    <ul class="technique-key-points">
                        <li>Layer partitioning</li>
                        <li>Sequential data flow</li>
                        <li>Micro-batches</li>
                        <li>Handles large models</li>
                    </ul>
                </article>

                <article class="technique-card" id="fsdpSummary" aria-label="FSDP Summary">
                    <div class="technique-name">
                        <span class="technique-icon" role="img" aria-label="FSDP icon">âš¡</span>
                        <span>FSDP</span>
                    </div>
                    <div class="technique-description">
                        Shards parameters across GPUs and dynamically gathers them when needed.
                    </div>
                    <ul class="technique-key-points">
                        <li>Parameter sharding</li>
                        <li>Dynamic gathering</li>
                        <li>Memory efficient</li>
                        <li>Scales to huge models</li>
                    </ul>
                </article>
            </div>
        </div>
    </div>

    <!-- Page 3: Thank You -->
    <div class="page-container" id="page3">
        <!-- Animated Background Graphics -->
        <div class="thank-you-bg">
            <!-- Neural Network Background -->
            <svg class="bg-neuron-network" viewBox="0 0 800 800">
                <!-- Neuron Nodes -->
                <circle cx="400" cy="200" r="8" fill="rgba(74, 158, 255, 0.6)" filter="url(#glow)">
                    <animate attributeName="opacity" values="0.4;0.8;0.4" dur="3s" repeatCount="indefinite"/>
                </circle>
                <circle cx="200" cy="400" r="8" fill="rgba(46, 213, 115, 0.6)" filter="url(#glow)">
                    <animate attributeName="opacity" values="0.6;1;0.6" dur="2.5s" repeatCount="indefinite"/>
                </circle>
                <circle cx="600" cy="400" r="8" fill="rgba(255, 184, 0, 0.6)" filter="url(#glow)">
                    <animate attributeName="opacity" values="0.5;0.9;0.5" dur="3.5s" repeatCount="indefinite"/>
                </circle>
                <circle cx="400" cy="600" r="8" fill="rgba(255, 107, 107, 0.6)" filter="url(#glow)">
                    <animate attributeName="opacity" values="0.4;0.7;0.4" dur="4s" repeatCount="indefinite"/>
                </circle>
                <circle cx="300" cy="300" r="6" fill="rgba(74, 158, 255, 0.5)" filter="url(#glow)">
                    <animate attributeName="opacity" values="0.3;0.7;0.3" dur="2.8s" repeatCount="indefinite"/>
                </circle>
                <circle cx="500" cy="300" r="6" fill="rgba(46, 213, 115, 0.5)" filter="url(#glow)">
                    <animate attributeName="opacity" values="0.4;0.8;0.4" dur="3.2s" repeatCount="indefinite"/>
                </circle>
                <circle cx="300" cy="500" r="6" fill="rgba(255, 184, 0, 0.5)" filter="url(#glow)">
                    <animate attributeName="opacity" values="0.5;0.9;0.5" dur="2.7s" repeatCount="indefinite"/>
                </circle>
                <circle cx="500" cy="500" r="6" fill="rgba(255, 107, 107, 0.5)" filter="url(#glow)">
                    <animate attributeName="opacity" values="0.3;0.6;0.3" dur="3.8s" repeatCount="indefinite"/>
                </circle>

                <!-- Connection Lines -->
                <line x1="400" y1="200" x2="200" y2="400" stroke="rgba(74, 158, 255, 0.3)" stroke-width="2">
                    <animate attributeName="stroke-opacity" values="0.2;0.5;0.2" dur="3s" repeatCount="indefinite"/>
                </line>
                <line x1="400" y1="200" x2="600" y2="400" stroke="rgba(74, 158, 255, 0.3)" stroke-width="2">
                    <animate attributeName="stroke-opacity" values="0.3;0.6;0.3" dur="2.5s" repeatCount="indefinite"/>
                </line>
                <line x1="200" y1="400" x2="400" y2="600" stroke="rgba(46, 213, 115, 0.3)" stroke-width="2">
                    <animate attributeName="stroke-opacity" values="0.2;0.4;0.2" dur="3.5s" repeatCount="indefinite"/>
                </line>
                <line x1="600" y1="400" x2="400" y2="600" stroke="rgba(255, 184, 0, 0.3)" stroke-width="2">
                    <animate attributeName="stroke-opacity" values="0.3;0.5;0.3" dur="4s" repeatCount="indefinite"/>
                </line>
                <line x1="300" y1="300" x2="500" y2="300" stroke="rgba(74, 158, 255, 0.2)" stroke-width="1.5">
                    <animate attributeName="stroke-opacity" values="0.1;0.4;0.1" dur="2.8s" repeatCount="indefinite"/>
                </line>
                <line x1="300" y1="500" x2="500" y2="500" stroke="rgba(255, 184, 0, 0.2)" stroke-width="1.5">
                    <animate attributeName="stroke-opacity" values="0.2;0.5;0.2" dur="3.2s" repeatCount="indefinite"/>
                </line>

                <!-- Glow Filter -->
                <defs>
                    <filter id="glow">
                        <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
                        <feMerge>
                            <feMergeNode in="coloredBlur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                </defs>
            </svg>

            <!-- Circuit Patterns -->
            <svg class="bg-circuit bg-circuit-1" viewBox="0 0 200 200">
                <path d="M20,100 L80,100 L80,40 L140,40" stroke="rgba(74, 158, 255, 0.4)" stroke-width="3" fill="none"/>
                <circle cx="80" cy="100" r="6" fill="rgba(74, 158, 255, 0.6)"/>
                <circle cx="80" cy="40" r="6" fill="rgba(46, 213, 115, 0.6)"/>
                <path d="M100,160 L100,100 L160,100" stroke="rgba(46, 213, 115, 0.4)" stroke-width="3" fill="none"/>
                <circle cx="100" cy="100" r="6" fill="rgba(255, 184, 0, 0.6)"/>
            </svg>

            <svg class="bg-circuit bg-circuit-2" viewBox="0 0 180 180">
                <path d="M30,90 L90,90 L90,30" stroke="rgba(255, 184, 0, 0.4)" stroke-width="3" fill="none"/>
                <circle cx="90" cy="90" r="6" fill="rgba(255, 184, 0, 0.6)"/>
                <path d="M90,90 L150,90 L150,150" stroke="rgba(255, 107, 107, 0.4)" stroke-width="3" fill="none"/>
                <circle cx="150" cy="90" r="6" fill="rgba(255, 107, 107, 0.6)"/>
            </svg>

            <svg class="bg-circuit bg-circuit-3" viewBox="0 0 150 150">
                <path d="M25,75 L75,75 L75,125" stroke="rgba(46, 213, 115, 0.4)" stroke-width="3" fill="none"/>
                <circle cx="75" cy="75" r="5" fill="rgba(46, 213, 115, 0.6)"/>
                <path d="M75,75 L125,75 L125,25" stroke="rgba(74, 158, 255, 0.4)" stroke-width="3" fill="none"/>
                <circle cx="125" cy="75" r="5" fill="rgba(74, 158, 255, 0.6)"/>
            </svg>

            <!-- Floating Particles -->
            <div class="floating-particle" style="top: 20%; left: 15%; animation-delay: 0s;"></div>
            <div class="floating-particle" style="top: 40%; right: 20%; animation-delay: 1s; background: var(--color-accent-primary);"></div>
            <div class="floating-particle" style="bottom: 30%; left: 25%; animation-delay: 2s; background: var(--color-accent-attention);"></div>
            <div class="floating-particle" style="top: 60%; right: 15%; animation-delay: 3s; background: var(--color-accent-warning);"></div>
            <div class="floating-particle" style="bottom: 20%; right: 30%; animation-delay: 4s;"></div>
        </div>

        <div class="thank-you-container">
            <h1 class="thank-you-title" id="thankYouTitle">Thank You!</h1>
            <p class="thank-you-subtitle" id="thankYouSubtitle">Questions & Discussion</p>

            <div class="thank-you-graphics" id="thankYouGraphics">
                <!-- Main Icons -->
                <div class="graphics-main">
                    <div class="graphic-item-large" role="img" aria-label="Rocket">ðŸš€</div>
                    <div class="graphic-item-large" role="img" aria-label="Neural Network">ðŸ§ </div>
                    <div class="graphic-item-large" role="img" aria-label="Target">ðŸŽ¯</div>
                </div>

                <!-- Achievement Badges -->
                <div class="achievement-grid">
                    <div class="achievement-badge">
                        <div class="achievement-icon" role="img" aria-label="Parallel">âš¡</div>
                        <div class="achievement-text">Parallel Training</div>
                    </div>
                    <div class="achievement-badge">
                        <div class="achievement-icon" role="img" aria-label="Scale">ðŸ“ˆ</div>
                        <div class="achievement-text">Scalable Solutions</div>
                    </div>
                    <div class="achievement-badge">
                        <div class="achievement-icon" role="img" aria-label="Performance">ðŸ”¥</div>
                        <div class="achievement-text">High Performance</div>
                    </div>
                    <div class="achievement-badge">
                        <div class="achievement-icon" role="img" aria-label="Efficiency">ðŸ’Ž</div>
                        <div class="achievement-text">Memory Efficient</div>
                    </div>
                </div>

                <!-- Contact Info -->
                <div class="contact-info">
                    <h3>Let's Connect</h3>
                    <div class="contact-item">
                        <span class="contact-icon">ðŸ“§</span>
                        <span>Deepak Baby</span>
                    </div>
                    <div class="contact-item">
                        <span class="contact-icon">ðŸ’¼</span>
                        <span>Distributed Training Expert</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Animation Utilities Framework -->
    <script src="../../animation-utils.js"></script>

    <script>
        // Initialize with AnimationController
        let currentPage = 0;
        const totalPages = 3;

        // Define animation steps for each page
        const page1Steps = [
            { elements: ['flowchartTitle'] },
            { elements: ['flowchartSubtitle'] },
            { elements: ['decision1'] },
            { elements: ['arrow1'] },
            { elements: ['yesLabel1', 'noLabel1'] },
            { elements: ['ddpBox', 'decision2'] },
            { elements: ['arrow2'] },
            { elements: ['yesLabel2', 'noLabel2'] },
            { elements: ['fsdpBox', 'pipelineBox'] },
            { elements: ['arrow3'] },
            { elements: ['fsdpNote', 'pipelineNote'] }
        ];

        const page2Steps = [
            { elements: ['summaryTitle'] },
            { elements: ['ddpSummary'] },
            { elements: ['pipelineSummary'] },
            { elements: ['fsdpSummary'] }
        ];

        const page3Steps = [
            { elements: ['thankYouTitle'] },
            { elements: ['thankYouSubtitle'] },
            { elements: ['thankYouGraphics'] }
        ];

        // Combine all steps with page information
        const allSteps = [
            ...page1Steps.map(s => ({ page: 0, ...s })),
            ...page2Steps.map(s => ({ page: 1, ...s })),
            ...page3Steps.map(s => ({ page: 2, ...s }))
        ];

        const totalSteps = allSteps.length;

        // Initialize animation controller - it will create its own controls
        const controller = new AnimationController(totalSteps);
        window.animationController = controller;

        // Show specific page
        function showPage(pageIndex) {
            document.querySelectorAll('.page-container').forEach((page, idx) => {
                page.classList.toggle('active', idx === pageIndex);
            });
        }

        // Update display based on current step
        function updateDisplay() {
            const currentStep = controller.getCurrentStep();
            const currentStepData = allSteps[currentStep];

            if (!currentStepData) return;

            const targetPage = currentStepData.page;
            showPage(targetPage);

            // Hide all elements first
            document.querySelectorAll('[id]').forEach(el => {
                if (el.id && !el.id.includes('Anim') && el.id !== 'currentStep' && el.id !== 'totalSteps') {
                    el.classList.remove('visible');
                }
            });

            // Show all elements up to and including current step
            for (let i = 0; i <= currentStep && i < allSteps.length; i++) {
                const step = allSteps[i];
                if (step.page === targetPage) {
                    step.elements.forEach(id => {
                        const el = document.getElementById(id);
                        if (el) {
                            el.classList.add('visible');
                        }
                    });
                }
            }

            // Update global state for parent communication
            window.currentAnimationStep = currentStep;
            window.totalAnimationSteps = totalSteps;
        }

        // Register callback for step changes
        controller.on('onStepChange', (step) => {
            updateDisplay();
        });

        // Initialize on page load
        window.addEventListener('load', () => {
            updateDisplay();
        });
    </script>
</body>
</html>
